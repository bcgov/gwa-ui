<nav mat-tab-nav-bar *ngIf="api">
  <a mat-tab-link [routerLink]="['../../../..']">API: {{api.name}}</a>

  <a mat-tab-link [routerLink]="['../../..']">Plugins</a>

  <a mat-tab-link [routerLink]="['../..']">{{pluginName}}</a>

  <a mat-tab-link [routerLink]="['..']" active="true">Users</a>
</nav>
<div *ngIf="api">
  <mat-toolbar>
    <mat-form-field>
      <input matInput placeholder="Add Username" [(ngModel)]="addUsername" pattern="[a-z][a-z0-9_]*" />
    </mat-form-field>
    <a [routerLink]="[addUsername]" mat-raised-button color="primary" [disabled]="!addUsername">Add User</a>
    
    <span style="flex: 1 1 auto"></span>
    <mat-progress-spinner
      *ngIf="refreshingCount"
      mode="indeterminate"
    ></mat-progress-spinner>
    <button (click)="refresh()" mat-icon-button title="Refresh" >
      <mat-icon fontSet="fa" fontIcon="fa-refresh"></mat-icon>
    </button>
  </mat-toolbar>

  <ngx-datatable
    class="material striped"
    [rows]="rows"
    [columns]="columns"
    [columnMode]="'force'"
    [headerHeight]="50"
    [footerHeight]="50"
    [rowHeight]="50"
    [count]="count"
    [cssClasses]="cssClasses"
    [scrollbarV]="true"
  ></ngx-datatable>
</div>

<ng-template #userT let-row="row" let-value="value"><a [routerLink]="['/ui','apis', row.api_name, 'plugins', pluginName, 'users', value]">{{value}}</a></ng-template>

<ng-template #dateT let-value="value">{{value | date:'yyyy-MM-dd HH:mm:ss'}}</ng-template>

<ng-template #flagT let-row="row" let-value="value">
  <span [ngSwitch]="value">
    <span *ngSwitchCase="true" class="fa fa-check" style="color: green" title="Yes"></span>
    <span *ngSwitchDefault class="fa fa-times" style="color: red" title="No"></span>
  </span>
</ng-template>

<ng-template #actionsT let-row="row">
  <button (click)="deleteObject(row)" mat-icon-button style="color: red" title="Delete">
    <mat-icon fontSet="fa" fontIcon="fa-trash-o"></mat-icon>
  </button>
</ng-template>
