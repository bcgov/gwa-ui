<div *ngIf="plugin">
  <ol class="breadcrumb" *ngIf="plugin.id">
    <li><a href="apis">APIs</a></li>
    <li><a href="apis/{{plugin.api_id}}">{{plugin.api.name}}</a></li>
    <li><a href="apis/{{plugin.api_id}}">Plugins</a></li>
    <li class="active">{{plugin.name}}</li>
  </ol>
  
  <h2>Plugin {{plugin.name}}</h2>
  <form [formGroup]="form" class="form-horizontal" role="form">
    <accordion>
      <accordion-group *ngFor="let group of groups" [heading]="group.title" [isOpen]="group.isOpen != false" [formGroupName]="group.formGroupName">
        <div class="row">
          <bs-form-group *ngFor="let field of group.fields"
            [form]="form"
            [name]="field.name"
            inputWidth="col-sm-12"
          >
            <bs-input-group [prefixText]="field.title">
              <span [ngSwitch]="field.readOnly">
                <p *ngSwitchCase="true" class="form-control form-control-static">{{plugin[field.name]}}</p>
                <span *ngSwitchDefault [ngSwitch]="field.type">
                  <span *ngSwitchCase="'checkbox'" class="form-control">
                    <input [formControlName]="field.name" type="checkbox" />
                  </span>
                  <select *ngSwitchCase="'select'" [formControlName]="field.name" class="form-control">
                    <option *ngFor="let value of field.values" [value]="value">{{value}}</option>
                  </select>
                  <input *ngSwitchDefault [formControlName]="field.name" [placeholder]="field.placeholder" [type]="field.type" [required]="field.required" class="form-control" />
                </span>
              </span>
            </bs-input-group>
          </bs-form-group>
        </div>
      </accordion-group>
    </accordion>
  </form>

  <div class="btn-toolbar" role="toolbar">
    <button (click)="goBack()" class="btn btn-sm btn-default" role="button">Cancel</button>
    <button (click)="save()" class="btn btn-sm btn-primary" role="button">Save</button>
  </div>

</div>